/***************************
FlipClock.js
Website and documentation at http://flipclockjs.com/
Copyright (c) 2013 Objective HTML, LCC shared under MIT LICENSE
*****************************/
var Base=function(){};
Base.extend=function(d,a){var b=Base.prototype.extend;Base._prototyping=true;var c=new this;b.call(c,d);c.base=function(){};delete Base._prototyping;var f=c.constructor,e=c.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==e){this._constructing=true;f.apply(this,arguments);delete this._constructing}else if(arguments[0]!==null)return(arguments[0].extend||b).call(arguments[0],c)};e.ancestor=this;e.extend=this.extend;e.forEach=this.forEach;e.implement=this.implement;
e.prototype=c;e.toString=this.toString;e.valueOf=function(h){return h=="object"?e:f.valueOf()};b.call(e,a);typeof e.init=="function"&&e.init();return e};
Base.prototype={extend:function(d,a){if(arguments.length>1){var b=this[d];if(b&&typeof a=="function"&&(!b.valueOf||b.valueOf()!=a.valueOf())&&/\bbase\b/.test(a)){var c=a.valueOf();a=function(){var j=this.base||Base.prototype.base;this.base=b;var k=c.apply(this,arguments);this.base=j;return k};a.valueOf=function(j){return j=="object"?a:c};a.toString=Base.toString}this[d]=a}else if(d){var f=Base.prototype.extend;if(!Base._prototyping&&typeof this!="function")f=this.extend||f;for(var e={toSource:null},
h=["constructor","toString","valueOf"],i=Base._prototyping?0:1;g=h[i++];)d[g]!=e[g]&&f.call(this,g,d[g]);for(var g in d)e[g]||f.call(this,g,d[g])}return this}};
Base=Base.extend({constructor:function(d){this.extend(d)}},{ancestor:Object,version:"1.1",forEach:function(d,a,b){for(var c in d)this.prototype[c]===undefined&&a.call(b,d[c],c,d)},implement:function(){for(var d=0;d<arguments.length;d++)if(typeof arguments[d]=="function")arguments[d](this.prototype);else this.prototype.extend(arguments[d]);return this},toString:function(){return String(this.valueOf())}});var FlipClock;
(function(d){FlipClock=function(a,b,c){return new FlipClock.Factory(a,b,c)};FlipClock.Lang={};FlipClock.Base=Base.extend({buildDate:"2013-11-07",version:"0.3.1",constructor:function(a,b){if(typeof a!=="object")a={};if(typeof b!=="object")b={};this.setOptions(d.extend(true,{},a,b))},callback:function(a){if(typeof a==="function"){for(var b=[],c=1;c<=arguments.length;c++)arguments[c]&&b.push(arguments[c]);a.apply(this,b)}},log:function(a){window.console&&console.log&&console.log(a)},getOption:function(a){if(this[a])return this[a];
return false},getOptions:function(){return this},setOption:function(a,b){this[a]=b},setOptions:function(a){for(var b in a)typeof a[b]!=="undefined"&&this.setOption(b,a[b])}});FlipClock.Factory=FlipClock.Base.extend({autoStart:true,callbacks:{destroy:false,create:false,init:false,interval:false,start:false,stop:false,reset:false},classes:{active:"flip-clock-active",before:"flip-clock-before",divider:"flip-clock-divider",dot:"flip-clock-dot",label:"flip-clock-label",flip:"flip",play:"play",wrapper:"flip-clock-wrapper"},
clockFace:"HourlyCounter",defaultClockFace:"HourlyCounter",defaultLanguage:"english",language:"english",lang:false,face:true,running:false,time:false,timer:false,lists:[],$wrapper:false,constructor:function(a,b,c){this.lists=[];this.running=false;this.base(c);this.$wrapper=d(a).addClass(this.classes.wrapper);this.time=new FlipClock.Time(this,b?Math.round(b):0);this.timer=new FlipClock.Timer(this,c);this.lang=this.loadLanguage(this.language);this.face=this.loadClockFace(this.clockFace,c);this.autoStart&&
this.start()},loadClockFace:function(a,b){var c;a=a.ucfirst()+"Face";c=FlipClock[a]?new FlipClock[a](this,b):new FlipClock[this.defaultClockFace+"Face"](this,b);c.build();return c},loadLanguage:function(a){return FlipClock.Lang[a.ucfirst()]?FlipClock.Lang[a.ucfirst()]:FlipClock.Lang[a]?FlipClock.Lang[a]:FlipClock.Lang[this.defaultLanguage]},localize:function(a,b){var c=this.lang,f=a.toLowerCase();if(typeof b=="object")c=b;if(c&&c[f])return c[f];return a},start:function(a){var b=this;if(!b.running&&
(!b.countdown||b.countdown&&b.time.time>0)){b.face.start(b.time);b.timer.start(function(){b.flip();typeof a==="function"&&a()})}else b.log("Trying to start timer when countdown already at 0")},stop:function(a){this.face.stop();this.timer.stop(a);for(var b in this.lists)this.lists[b].stop()},reset:function(a){this.timer.reset(a);this.face.reset()},setTime:function(a){this.time.time=a;this.face.setTime(a)},getTime:function(){return this.time},setCountdown:function(a){var b=this.running;this.countdown=
a?true:false;if(b){this.stop();this.start()}},flip:function(){this.face.flip()}});FlipClock.Face=FlipClock.Base.extend({dividers:[],factory:false,lists:[],constructor:function(a,b){this.base(b);this.factory=a;this.dividers=[]},build:function(){},createDivider:function(a,b,c){if(typeof b=="boolean"||!b){c=b;b=a}var f=['<span class="'+this.factory.classes.dot+' top"></span>','<span class="'+this.factory.classes.dot+' bottom"></span>'].join("");if(c)f="";a=this.factory.localize(a);a=['<span class="'+
this.factory.classes.divider+" "+(b?b:"").toLowerCase()+'">','<span class="'+this.factory.classes.label+'">'+(a?a:"")+"</span>",f,"</span>"];return d(a.join(""))},createList:function(a,b){if(typeof a==="object"){b=a;a=0}return new FlipClock.List(this.factory,a,b)},reset:function(){},setTime:function(a){this.flip(a)},addDigit:function(a){a=this.createList(a,{classes:{active:this.factory.classes.active,before:this.factory.classes.before,flip:this.factory.classes.flip}});a.$obj.insertBefore(this.factory.lists[0].$obj);
this.factory.lists.unshift(a)},start:function(){},stop:function(){},flip:function(a,b){var c=this;if(!b)if(c.factory.countdown){c.factory.time.time<=0&&c.factory.stop();c.factory.time.time--}else c.factory.time.time++;var f=c.factory.lists.length-a.length;if(f<0)f=0;d.each(a,function(h,i){h+=f;var g=c.factory.lists[h];if(g){var j=g.digit;g.select(i);i!=j&&!b&&g.play()}else c.addDigit(i)});for(var e=0;e<a.length;e++)e>=f&&c.factory.lists[e].digit!=a[e]&&c.factory.lists[e].select(a[e])}});FlipClock.List=
FlipClock.Base.extend({digit:0,classes:{active:"flip-clock-active",before:"flip-clock-before",flip:"flip"},factory:false,$obj:false,items:[],constructor:function(a,b){this.factory=a;this.digit=b;this.$obj=this.createList();b>0&&this.select(b);this.factory.$wrapper.append(this.$obj)},select:function(a){if(typeof a==="undefined")a=this.digit;else this.digit=a;a=this.$obj.find('[data-digit="'+a+'"]');this.$obj.find("."+this.classes.active).removeClass(this.classes.active);this.$obj.find("."+this.classes.before).removeClass(this.classes.before);
if(this.factory.countdown)a.is(":last-child")?this.$obj.find(":first-child").addClass(this.classes.before):a.next().addClass(this.classes.before);else a.is(":first-child")?this.$obj.find(":last-child").addClass(this.classes.before):a.prev().addClass(this.classes.before);a.addClass(this.classes.active)},play:function(){this.$obj.addClass(this.factory.classes.play)},stop:function(){var a=this;setTimeout(function(){a.$obj.removeClass(a.factory.classes.play)},this.factory.timer.interval)},createList:function(){for(var a=
d('<ul class="'+this.classes.flip+" "+(this.factory.running?this.factory.classes.play:"")+'" ></ul>'),b=0;b<10;b++){var c=d(['<li data-digit="'+b+'">','<a href="#"><div class="up"><div class="shadow"></div>','<div class="inn">'+b+"</div>",'</div><div class="down"><div class="shadow"></div>','<div class="inn">'+b+"</div>","</div></a></li>"].join(""));this.items.push(c);a.append(c)}return a}});FlipClock.Time=FlipClock.Base.extend({minimumDigits:0,time:0,factory:false,constructor:function(a,b,c){this.base(c);
this.factory=a;if(b)this.time=b},convertDigitsToArray:function(a){var b=[];a=a.toString();for(var c=0;c<a.length;c++)a[c].match(/^\d*$/g)&&b.push(a[c]);return b},digit:function(a){var b=this.toString(),c=b.length;if(b[c-a])return b[c-a];return false},digitize:function(a){var b=[];d.each(a,function(c,f){f=f.toString();if(f.length==1)f="0"+f;for(var e=0;e<f.length;e++)b.push(f[e])});if(b.length>this.minimumDigits)this.minimumDigits=b.length;this.minimumDigits>b.length&&b.unshift("0");return b},getDayCounter:function(a){var b=
[this.getDays(),this.getHours(true),this.getMinutes(true)];a&&b.push(this.getSeconds(true));return this.digitize(b)},getDays:function(a){var b=this.time/60/60/24;if(a)b%=7;return Math.floor(b)},getHourCounter:function(){return this.digitize([this.getHours(),this.getMinutes(true),this.getSeconds(true)])},getHourly:function(){return this.getHourCounter()},getHours:function(a){var b=this.time/60/60;if(a)b%=24;return Math.floor(b)},getMilitaryTime:function(){var a=new Date;return this.digitize([a.getHours(),
a.getMinutes(),a.getSeconds()])},getMinutes:function(a){var b=this.time/60;if(a)b%=60;return Math.floor(b)},getMinuteCounter:function(){return this.digitize([this.getMinutes(),this.getSeconds(true)])},getSeconds:function(a){var b=this.time;if(a)if(b==60)b=0;else b%=60;return Math.ceil(b)},getTime:function(){var a=new Date,b=a.getHours();return this.digitize([b>12?b-12:b===0?12:b,a.getMinutes(),a.getSeconds()])},getWeeks:function(){var a=this.time/60/60/24/7;if(mod)a%=52;return Math.floor(a)},removeLeadingZeros:function(a,
b){var c=0,f=[];d.each(b,function(e){if(e<a)c+=parseInt(b[e],10);else f.push(b[e])});if(c===0)return f;return b},toString:function(){return this.time.toString()}});FlipClock.Timer=FlipClock.Base.extend({callbacks:{destroy:false,create:false,init:false,interval:false,start:false,stop:false,reset:false},count:0,factory:false,interval:1E3,constructor:function(a,b){this.base(b);this.factory=a;this.callback(this.callbacks.init);this.callback(this.callbacks.create)},getElapsed:function(){return this.count*
this.interval},getElapsedTime:function(){return new Date(this.time+this.getElapsed())},reset:function(a){clearInterval(this.timer);this.count=0;this._setInterval(a);this.callback(this.callbacks.reset)},start:function(a){this.factory.running=true;this._createTimer(a);this.callback(this.callbacks.start)},stop:function(a){this.factory.running=false;this._clearInterval(a);this.callback(this.callbacks.stop);this.callback(a)},_clearInterval:function(){clearInterval(this.timer)},_createTimer:function(a){this._setInterval(a)},
_destroyTimer:function(a){this._clearInterval();this.timer=false;this.callback(a);this.callback(this.callbacks.destroy)},_interval:function(a){this.callback(this.callbacks.interval);this.callback(a);this.count++},_setInterval:function(a){var b=this;b.timer=setInterval(function(){b._interval(a)},this.interval)}});String.prototype.ucfirst=function(){return this.substr(0,1).toUpperCase()+this.substr(1)};d.fn.FlipClock=function(a,b){if(typeof a=="object"){b=a;a=0}return new FlipClock(d(this),a,b)};d.fn.flipClock=
function(a,b){return d.fn.FlipClock(a,b)}})(jQuery);
(function(d){FlipClock.DailyCounterFace=FlipClock.Face.extend({showSeconds:true,constructor:function(a,b){this.base(a,b)},build:function(a,b){var c=this,f=this.factory.$wrapper.find("ul"),e=[],h=0;b=b?b:this.factory.time.getDayCounter(this.showSeconds);b.length>f.length&&d.each(b,function(i,g){e.push(c.createList(g))});this.factory.lists=e;if(this.showSeconds)d(this.createDivider("Seconds")).insertBefore(this.factory.lists[this.factory.lists.length-2].$obj);else h=2;d(this.createDivider("Minutes")).insertBefore(this.factory.lists[this.factory.lists.length-
4+h].$obj);d(this.createDivider("Hours")).insertBefore(this.factory.lists[this.factory.lists.length-6+h].$obj);d(this.createDivider("Days",true)).insertBefore(this.factory.lists[0].$obj);this._clearExcessDigits();this.autoStart&&this.start()},flip:function(a,b){b||(b=this.factory.time.getDayCounter(this.showSeconds));this.base(b,a)},_clearExcessDigits:function(){for(var a=this.factory.lists[this.factory.lists.length-2],b=this.factory.lists[this.factory.lists.length-4],c=6;c<10;c++){a.$obj.find("li:last-child").remove();
b.$obj.find("li:last-child").remove()}}})})(jQuery);
(function(d){FlipClock.HourlyCounterFace=FlipClock.Face.extend({clearExcessDigits:true,constructor:function(a,b){this.base(a,b)},build:function(a,b){var c=this,f=this.factory.$wrapper.find("ul"),e=[];b=b?b:this.factory.time.getHourCounter();b.length>f.length&&d.each(b,function(h,i){e.push(c.createList(i))});this.factory.lists=e;d(this.createDivider("Seconds")).insertBefore(this.factory.lists[this.factory.lists.length-2].$obj);d(this.createDivider("Minutes")).insertBefore(this.factory.lists[this.factory.lists.length-4].$obj);
a||d(this.createDivider("Hours",true)).insertBefore(this.factory.lists[0].$obj);this.clearExcessDigits&&this._clearExcessDigits();this.autoStart&&this.start()},flip:function(a,b){b||(b=this.factory.time.getHourCounter());this.base(b,a)},_clearExcessDigits:function(){for(var a=this.factory.lists[this.factory.lists.length-2],b=this.factory.lists[this.factory.lists.length-4],c=6;c<10;c++){a.$obj.find("li:last-child").remove();b.$obj.find("li:last-child").remove()}}})})(jQuery);